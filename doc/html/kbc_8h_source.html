<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BSoD-Syndrome: /Users/pchambino/Desktop/Pedro/FEUP/2 Ano/2 Semestre/LCOM/Projecto/bsod-syndrome/src/kbc.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>/Users/pchambino/Desktop/Pedro/FEUP/2 Ano/2 Semestre/LCOM/Projecto/bsod-syndrome/src/kbc.h</h1><a href="kbc_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="preprocessor">#ifndef _KBC_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#define _KBC_H</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &quot;<a class="code" href="utypes_8h.html">utypes.h</a>&quot;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &quot;<a class="code" href="timer_8h.html">timer.h</a>&quot;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;<a class="code" href="gqueue_8h.html">GQueue.h</a>&quot;</span>
<a name="l00008"></a>00008 
<a name="l00015"></a><a class="code" href="group___keyboard_controller.html#ga34599ca5c55cb9be3b235d7422aff45c">00015</a> <span class="preprocessor">#define KBC_TIMEOUT 30 </span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="preprocessor"></span>
<a name="l00019"></a><a class="code" href="group___keyboard_controller.html#gabf7206ca2181c36ef04b795c9b64e886">00019</a> <span class="preprocessor">#define CMD_REG   0x64  </span>
<a name="l00020"></a><a class="code" href="group___keyboard_controller.html#ga89c4d098b53809674457b1660b1af780">00020</a> <span class="preprocessor">#define STAT_REG  0x64  </span>
<a name="l00021"></a><a class="code" href="group___keyboard_controller.html#ga71b8ba376f687142f60a82d18c2715e0">00021</a> <span class="preprocessor">#define DATA_REG  0x60  </span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00026"></a><a class="code" href="group___keyboard_controller.html#ga45967c9e25447ba853cf6fb4ac545fe6">00026</a> <span class="preprocessor">#define OBF     (1 &lt;&lt; 0) </span>
<a name="l00027"></a><a class="code" href="group___keyboard_controller.html#ga3c48b10907056351582baf9f6478598e">00027</a> <span class="preprocessor">#define IBF     (1 &lt;&lt; 1) </span>
<a name="l00028"></a><a class="code" href="group___keyboard_controller.html#ga1b41fd2be63532d4ab910f8b256c3811">00028</a> <span class="preprocessor">#define AUX     (1 &lt;&lt; 5) </span>
<a name="l00029"></a><a class="code" href="group___keyboard_controller.html#ga307ab71673e26ec42b28a3bca05d4cb5">00029</a> <span class="preprocessor">#define PAR_ERR (1 &lt;&lt; 7) </span>
<a name="l00030"></a><a class="code" href="group___keyboard_controller.html#gad16f61e2bf70f6c7685e826224ed177f">00030</a> <span class="preprocessor">#define TO_ERR  (1 &lt;&lt; 6) </span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00035"></a><a class="code" href="group___keyboard_controller.html#ga9f7743653801b79b2cf7c4a2707882ad">00035</a> <span class="preprocessor">#define ResetKBC   0xFF </span>
<a name="l00036"></a><a class="code" href="group___keyboard_controller.html#gae1856867674001a426a9ffb156affcd2">00036</a> <span class="preprocessor">#define DefaultKBD 0xF6 </span>
<a name="l00037"></a><a class="code" href="group___keyboard_controller.html#gaaa35612ed5d4fdbe8000df239239713e">00037</a> <span class="preprocessor">#define DisableKBD 0xF5 </span>
<a name="l00038"></a><a class="code" href="group___keyboard_controller.html#ga696342c5acdcc88677782c0f3133b549">00038</a> <span class="preprocessor">#define EnableKBD  0xF4 </span>
<a name="l00039"></a><a class="code" href="group___keyboard_controller.html#ga5e6859fb7c74889de02b86f3a03fec56">00039</a> <span class="preprocessor">#define KBDRate    0xF3 </span>
<a name="l00040"></a><a class="code" href="group___keyboard_controller.html#ga59358190e83ceb32a586e77d01a536c6">00040</a> <span class="preprocessor">#define WriteLEDS  0xED </span>
<a name="l00041"></a><a class="code" href="group___keyboard_controller.html#ga1762a3d7ed4ff016f09dd89a931ac871">00041</a> <span class="preprocessor">#define SCROLL_LOCK (1 &lt;&lt; 0) </span>
<a name="l00042"></a><a class="code" href="group___keyboard_controller.html#ga4dec6ba83b643ca753f0be5b167b02ae">00042</a> <span class="preprocessor">#define NUM_LOCK    (1 &lt;&lt; 1) </span>
<a name="l00043"></a><a class="code" href="group___keyboard_controller.html#ga7d5d3b2ce697563a426c7fda967af9d7">00043</a> <span class="preprocessor">#define CAPS_LOCK   (1 &lt;&lt; 2) </span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00048"></a><a class="code" href="group___keyboard_controller.html#ga6f6489887e08bff4887d0bc5dcf214d8">00048</a> <span class="preprocessor">#define ACK        0xFA </span>
<a name="l00049"></a><a class="code" href="group___keyboard_controller.html#ga0ad9f0fd5fc87aa4630979da018fdb39">00049</a> <span class="preprocessor">#define Resend     0xFE </span>
<a name="l00050"></a><a class="code" href="group___keyboard_controller.html#ga0f20a163dec609fb464cba845e043be8">00050</a> <span class="preprocessor">#define Error      0xFC </span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="group___keyboard_controller.html#ga99bbff320189ff927ad8d28b32d0a3e2">00055</a> <span class="preprocessor">#define ReadCommand   0x20 </span>
<a name="l00056"></a><a class="code" href="group___keyboard_controller.html#ga177bb59d36f14c1024b2de1601693605">00056</a> <span class="preprocessor">#define WriteCommand  0x60 </span>
<a name="l00057"></a><a class="code" href="group___keyboard_controller.html#ga884864c92108739e60113ca2079cbe71">00057</a> <span class="preprocessor">#define DisableMouse  0xA7 </span>
<a name="l00058"></a><a class="code" href="group___keyboard_controller.html#gacaa321c74955e015d83da05cd321c0f8">00058</a> <span class="preprocessor">#define EnableMouse   0xA8 </span>
<a name="l00059"></a><a class="code" href="group___keyboard_controller.html#gab47f9ef099e1f33e026e5ee549900624">00059</a> <span class="preprocessor">#define TestMouse     0xA9 </span>
<a name="l00060"></a><a class="code" href="group___keyboard_controller.html#gaf555314895f7b6544624a51f22e3aeb0">00060</a> <span class="preprocessor">#define Test8042      0xAA </span>
<a name="l00061"></a><a class="code" href="group___keyboard_controller.html#ga5414bbfebe830e7887014106d3fd681e">00061</a> <span class="preprocessor">#define TestKBD       0xAB </span>
<a name="l00062"></a><a class="code" href="group___keyboard_controller.html#ga69a0c992535a868edcb9362b52859914">00062</a> <span class="preprocessor">#define NDisableKBD   0xAD </span>
<a name="l00063"></a><a class="code" href="group___keyboard_controller.html#gace4e2548e5f13bab908c668fe5df5819">00063</a> <span class="preprocessor">#define NEnableKBD    0xAE </span>
<a name="l00064"></a><a class="code" href="group___keyboard_controller.html#ga1ace60d764c21d4e3dfe01f6b9b401e0">00064</a> <span class="preprocessor">#define WriteMouse    0xD4 </span>
<a name="l00065"></a><a class="code" href="group___keyboard_controller.html#ga01e50ef9f098e20f6b0b0429644862cf">00065</a> <span class="preprocessor">#define ResetPC       0xFE </span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00072"></a><a class="code" href="group___keyboard_controller.html#gafc6b776bcf10fb8d8c84c9e2a924025e">00072</a> <span class="preprocessor">#define INT_1    (1 &lt;&lt; 0)  </span>
<a name="l00073"></a><a class="code" href="group___keyboard_controller.html#ga474732bbd6e6c485541a39fb44b88325">00073</a> <span class="preprocessor">#define INT_12   (1 &lt;&lt; 1)  </span>
<a name="l00074"></a><a class="code" href="group___keyboard_controller.html#ga9e6ea2b423d7213db16c4975aaf38899">00074</a> <span class="preprocessor">#define EN_KBD   (1 &lt;&lt; 4)  </span>
<a name="l00075"></a><a class="code" href="group___keyboard_controller.html#gaf9776e4566c3a77a7c3631530998f386">00075</a> <span class="preprocessor">#define EN_MOUSE (1 &lt;&lt; 5)  </span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>
<a name="l00082"></a><a class="code" href="group___keyboard_controller.html#gad6089b7326e09854f0670e5dd3b4612a">00082</a> <span class="preprocessor">#define MouseReset     0xFF</span>
<a name="l00083"></a><a class="code" href="group___keyboard_controller.html#ga1e9689f4bb2acbcbb8c83dde66b2192f">00083</a> <span class="preprocessor"></span><span class="preprocessor">#define MouseDefaults  0xF6</span>
<a name="l00084"></a><a class="code" href="group___keyboard_controller.html#gab0514340ae64ca6bd470fc518efb1409">00084</a> <span class="preprocessor"></span><span class="preprocessor">#define StreamDisable  0xF5</span>
<a name="l00085"></a><a class="code" href="group___keyboard_controller.html#ga2ffc6eb402762e3b4f9c553796b9b060">00085</a> <span class="preprocessor"></span><span class="preprocessor">#define StreamEnable 0xF4</span>
<a name="l00086"></a><a class="code" href="group___keyboard_controller.html#ga6109d272a7e0839b7ab18c38b50d8464">00086</a> <span class="preprocessor"></span><span class="preprocessor">#define SampleRate   0xF3</span>
<a name="l00087"></a><a class="code" href="group___keyboard_controller.html#ga6e02bbb2debd87c4a931acec280494e8">00087</a> <span class="preprocessor"></span><span class="preprocessor">#define ReadDevice   0xF2</span>
<a name="l00088"></a><a class="code" href="group___keyboard_controller.html#gaccd8c46af3b38f50c99fbddd7703513d">00088</a> <span class="preprocessor"></span><span class="preprocessor">#define RemoteMode   0xF0</span>
<a name="l00089"></a><a class="code" href="group___keyboard_controller.html#gae59f0330db4123de14d87a2594c7f29c">00089</a> <span class="preprocessor"></span><span class="preprocessor">#define MouseReadData  0xEB</span>
<a name="l00090"></a><a class="code" href="group___keyboard_controller.html#ga89e4319b16638bfc84fafa1fb65ca0c2">00090</a> <span class="preprocessor"></span><span class="preprocessor">#define EnterStream  0xEA</span>
<a name="l00091"></a><a class="code" href="group___keyboard_controller.html#gaef6666aa14f3bea60824b38ecfe4728d">00091</a> <span class="preprocessor"></span><span class="preprocessor">#define StatusRequest 0xE9</span>
<a name="l00092"></a><a class="code" href="group___keyboard_controller.html#ga09e84fb09affc016c2800424cd09b7f6">00092</a> <span class="preprocessor"></span><span class="preprocessor">#define Resolution   0xE8</span>
<a name="l00093"></a><a class="code" href="group___keyboard_controller.html#gaac83f3dad20cc9a631eb84be0676d358">00093</a> <span class="preprocessor"></span><span class="preprocessor">#define Scaling2     0xE7</span>
<a name="l00094"></a><a class="code" href="group___keyboard_controller.html#ga517de159c505818ad67d371dbec33d53">00094</a> <span class="preprocessor"></span><span class="preprocessor">#define Scaling1     0xE6</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="group___keyboard_controller.html#ga08deb639aef83c70892a364261b09133">00100</a> <span class="preprocessor">#define YOVF (1 &lt;&lt; 7) </span>
<a name="l00101"></a><a class="code" href="group___keyboard_controller.html#gac3172c891b25dafed9ced2476aa03cf1">00101</a> <span class="preprocessor">#define XOVF (1 &lt;&lt; 6) </span>
<a name="l00102"></a><a class="code" href="group___keyboard_controller.html#ga5c610c7c656c4cf62564a959c30e0245">00102</a> <span class="preprocessor">#define YSGN (1 &lt;&lt; 5) </span>
<a name="l00103"></a><a class="code" href="group___keyboard_controller.html#ga1829ceaee57583878dbef19f0bc1a724">00103</a> <span class="preprocessor">#define XSGN (1 &lt;&lt; 4) </span>
<a name="l00104"></a><a class="code" href="group___keyboard_controller.html#gab4abb667b74797a9a64f95d388c4da75">00104</a> <span class="preprocessor">#define MBT  (1 &lt;&lt; 2) </span>
<a name="l00105"></a><a class="code" href="group___keyboard_controller.html#gabc6d7bd471913c986a226a3893174dfc">00105</a> <span class="preprocessor">#define RBT  (1 &lt;&lt; 1) </span>
<a name="l00106"></a><a class="code" href="group___keyboard_controller.html#ga6bec57496b9c9cc22e12e62997e5be91">00106</a> <span class="preprocessor">#define LBT  (1 &lt;&lt; 0) </span>
<a name="l00107"></a>00107 <span class="preprocessor"></span>
<a name="l00111"></a><a class="code" href="group___keyboard_controller.html#ga37a6485f1a57d53c63b242f8692c9868">00111</a> <span class="preprocessor">#define LEFT_BUTTON(dt)   (((dt) &amp; LBT) == LBT) </span>
<a name="l00112"></a><a class="code" href="group___keyboard_controller.html#ga8f2cffb043cf466894e2019ea14c400d">00112</a> <span class="preprocessor">#define RIGHT_BUTTON(dt)  (((dt) &amp; RBT) == RBT) </span>
<a name="l00113"></a><a class="code" href="group___keyboard_controller.html#gacfa9590af87bbf796387e1c6e01ef5c3">00113</a> <span class="preprocessor">#define MIDDLE_BUTTON(dt) (((dt) &amp; MBT) == MBT) </span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>
<a name="l00115"></a><a class="code" href="group___keyboard_controller.html#ga43c087e52d2e7260fed09fc0cc7d5752">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define Y_OVERFLOW(dt)    (((dt) &amp; XOVF) == XOVF) </span>
<a name="l00116"></a><a class="code" href="group___keyboard_controller.html#ga8c9b6532dd05bc77e9bcef499868d98f">00116</a> <span class="preprocessor">#define X_OVERFLOW(dt)    (((dt) &amp; YOVF) == YOVF) </span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>
<a name="l00118"></a><a class="code" href="group___keyboard_controller.html#gaaf66ab279fa7f3781953d0c4422a7790">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define X_SIGN(dt)        (((dt) &amp; XSGN) == XSGN ? -1 : 1) </span>
<a name="l00119"></a><a class="code" href="group___keyboard_controller.html#gaab5db4b8ea62f4cce4c01f703f0c8592">00119</a> <span class="preprocessor">#define Y_SIGN(dt)        (((dt) &amp; YSGN) == YSGN ? -1 : 1) </span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>
<a name="l00189"></a>00189 <span class="preprocessor">int kbc_init(int debug);</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>
<a name="l00196"></a>00196 <span class="keywordtype">void</span> <a class="code" href="group___keyboard_controller.html#ga2f953c4ccfdb59883c1821412f73f237" title="Disable the mouse, sending a StreamDisable to the mouse, then disables generation...">mouse_disable</a>(<span class="keywordtype">void</span>);
<a name="l00197"></a>00197 
<a name="l00203"></a>00203 <span class="keywordtype">int</span>  <a class="code" href="group___keyboard_controller.html#gad0f35d8bf87c5a507aede8692c45f877" title="Write &amp;#39;data&amp;#39; to the command register, returning 0 for OK or -1 on timeout...">write_kbc_cmd</a>( <span class="keywordtype">unsigned</span> data);
<a name="l00204"></a>00204 
<a name="l00211"></a>00211 <span class="keywordtype">int</span> <a class="code" href="group___keyboard_controller.html#gaa9a19096e4c8f7457fe99ad274ae4836" title="Returns 1 if a DOS mouse driver is installed, 0 if not.">has_DOS_mouse_ISR</a>();
<a name="l00212"></a>00212   
<a name="l00220"></a>00220 <span class="keywordtype">int</span>  <a class="code" href="group___keyboard_controller.html#gab19779ea7896435b3d4a5ff8a420f37e" title="Write &amp;#39;data&amp;#39; to the data register, returning ACK, Error or -1 on timeout...">write_kbc_data</a>( <span class="keywordtype">unsigned</span> data);
<a name="l00221"></a>00221 
<a name="l00230"></a>00230 <span class="keywordtype">int</span>  <a class="code" href="group___keyboard_controller.html#ga60b51b413d6f90bfb8dd7df85ddb63a2" title="Send &amp;#39;cmd&amp;#39; to the mouse, prefacing it with the WriteMouse command to the...">write_aux</a>(<span class="keywordtype">unsigned</span> cmd);
<a name="l00231"></a>00231 
<a name="l00238"></a>00238 <span class="keywordtype">int</span>  <a class="code" href="group___keyboard_controller.html#ga52a7ce44125208dfa303e597e6302a71" title="Returns the data read a the data register.">read_kbc</a>(<span class="keywordtype">void</span>);
<a name="l00239"></a>00239 
<a name="l00245"></a>00245 <span class="keywordtype">int</span>  <a class="code" href="group___keyboard_controller.html#gad0f4763c978797b701c51fe3841ebdb0" title="Write &amp;#39;data&amp;#39; at IO address &amp;#39;adr&amp;#39; , returning -1 on error or timeout...">write_kbc</a>(<span class="keywordtype">unsigned</span> adr, <span class="keywordtype">unsigned</span> data);
<a name="l00246"></a>00246 
<a name="l00250"></a>00250 <span class="keywordtype">void</span> <a class="code" href="group___keyboard_controller.html#ga55d69f46dae31a8035bfe4920ad695e5" title="shortky blink all three keyboard LEDs">blink_leds</a>(<span class="keywordtype">void</span>);
<a name="l00251"></a>00251 
<a name="l00255"></a>00255 <span class="keywordtype">void</span> <a class="code" href="group___keyboard_controller.html#gaa1d5a573482dc5ead6039c0db68b85f6" title="shortky blink left(1), middle(2) or right(3) keyboard LED">blink_led</a>(<a class="code" href="group___user_types.html#ga65f85814a8290f9797005d3b28e7e5fc" title="uchar is shorter to type than unsigned char">uchar</a> led);
<a name="l00256"></a>00256 
<a name="l00259"></a>00259 <span class="preprocessor">#endif</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Tue May 25 04:21:02 2010 for BSoD-Syndrome by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
